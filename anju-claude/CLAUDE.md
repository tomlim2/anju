# CLAUDE.md

This file provides guidance for Claude Code when working with the global `anju-claude` configuration system.

## What Is This?

`anju-claude` is your **global Claude Code configuration**, symlinked to `~/.claude`. Instead of letting runtime data scatter across your home directory, this folder brings structure, version control, and portability to your Claude workflow.

This is not just a collection of scripts. It's a system for encoding your best practices, automating the right way to work, and protecting your personal data.

---

## Philosophy: Workflow as Craft

> **ultrathink** - We're not automating tasks. We're composing instruments for making a dent in the universe.

### Commands
Each command is not just automation—it's a **guardrail that enforces the right way**. When you create a command, you're not reducing keystrokes; you're codifying excellence. Every command should make it impossible to do the wrong thing.

### Skills
Each skill is not just a script—it's **accumulated experience turned into reusable code**. Skills are the moves you've perfected through iteration, now available as building blocks. Write skills that you'd be proud to open-source.

### Private
This is your **data vault**. Any personal information Claude collects—commits for your portfolio, project-specific notes, cached data—lives here and only here. Private is gitignored by default. Treat it as sacred.

---

## Architecture

```
anju-claude/
├── commands/          # Slash commands for Claude Code
│   ├── commit-m.md
│   ├── clean-up.md
│   └── collect-commits.md
├── skills/            # Reusable Python/shell utilities
│   └── git-commit-collector/
│       ├── SKILL.md
│       └── extract_commits.py
├── private/           # Personal data storage (gitignored)
│   ├── commits/       # Extracted commit histories
│   ├── notes/         # Project-specific notes
│   └── cache/         # Temporary cached data
├── CLAUDE.md          # This file
└── README.md          # Quick reference
```

**Runtime folders** (auto-generated by Claude Code, gitignored):
- `history.jsonl` - Conversation history
- `settings.json` - User settings
- `todos/` - Task tracking data
- `projects/` - Project-specific metadata
- `file-history/` - File edit history
- `shell-snapshots/` - Shell session snapshots

---

## Writing Commands

Commands are **slash commands** that appear in Claude Code's command palette. They're defined using markdown files with frontmatter.

### Anatomy of a Command

```markdown
---
allowed-tools: Bash(git diff:*), Bash(git status:*), Read, Edit
description: Generate a git commit message based on staged changes
argument-hint: "[type]"
---

# Command Title

Instructions for Claude on how to execute this command.

## Dynamic Execution

Use !`command` to execute shell commands and inject results:
- Current status: !`git status`
- Staged changes: !`git diff --cached`

## Arguments

Access user-provided arguments via $ARGUMENTS variable.
```

### Frontmatter Fields

- **`allowed-tools`**: Whitelist of tools Claude can use (e.g., `Bash(git:*)`, `Read`, `Edit`, `Grep`)
- **`description`**: One-line summary shown in command palette
- **`argument-hint`**: Placeholder text for arguments (optional)

### Best Practices

1. **Be specific with allowed-tools**: `Bash(git:*)` is safer than `Bash`
2. **Use dynamic execution** (`!backtick`) to provide fresh context
3. **Include examples** of expected input/output formats
4. **Handle edge cases** gracefully (no staged changes, missing files, etc.)

### Example: Minimal Command

```markdown
---
allowed-tools: Bash(ls:*)
description: List Python files in current directory
---

# List Python Files

Run: !`ls *.py`

Show the user the list of Python files found.
```

---

## Writing Skills

Skills are **reusable utilities** that commands invoke. They typically consist of:
1. A `SKILL.md` describing what the skill does
2. An implementation (Python script, shell script, etc.)

### Directory Structure

```
skills/
└── my-skill-name/
    ├── SKILL.md           # Skill documentation
    ├── script.py          # Implementation
    └── config.json        # Optional configuration
```

### Example: Git Commit Collector

**`skills/git-commit-collector/SKILL.md`**:
```markdown
# git-commit-collector

Git commit history extraction skill for Claude Code.

## Usage

Extract commits from a repository and save to the private commits folder.

## Files

- `extract_commits.py` - Main extraction script
```

**`skills/git-commit-collector/extract_commits.py`**:
- Well-documented Python script
- Accepts CLI arguments via `argparse`
- Outputs to `~/.claude/private/commits/` by default

### Skills vs Commands

| Feature | Command | Skill |
|---------|---------|-------|
| Invoked via | Slash command (`/commit-m`) | Called by commands or directly |
| Defined in | Markdown frontmatter | Python/shell + SKILL.md |
| Purpose | User-facing workflow | Reusable logic |
| Tools | Restricted by `allowed-tools` | Full system access |

**Rule of thumb**: If it's interactive and workflow-specific → Command. If it's reusable logic → Skill.

---

## Private Folder Rules

The `private/` directory is for **personal data only**. It's gitignored to protect sensitive information.

### What Goes in Private?

✅ **Yes:**
- Extracted commit histories for portfolio
- Project-specific notes and analysis
- Cached API responses or expensive computations
- Personal TODO lists or research notes

❌ **No:**
- Source code (belongs in project repos)
- Shared configuration (use `commands/` or `skills/`)
- Secrets (use environment variables or password managers)

### Structure Recommendations

```
private/
├── commits/           # Git history extractions
│   ├── anju_commits.json
│   └── other_project_commits.json
├── notes/             # Project research and notes
│   └── unreal-optimization-ideas.md
└── cache/             # Temporary data
    └── texture-analysis.json
```

### Accessing Private Data

From commands:
```markdown
Read the commits: !`cat ~/.claude/private/commits/anju_commits.json`
```

From skills:
```python
from pathlib import Path

PRIVATE_DIR = Path.home() / ".claude" / "private"
commits_file = PRIVATE_DIR / "commits" / "repo_commits.json"
```

---

## Best Practices

### 1. Commands Should Be Self-Contained
Each command should include all context needed via dynamic execution (`!backtick`). Don't assume Claude remembers previous state.

### 2. Skills Should Have Clear Interfaces
- Accept arguments via CLI flags
- Output to predictable locations (preferably `private/`)
- Include `--help` documentation
- Handle errors gracefully

### 3. Respect the Philosophy
- **Think Different**: Before creating a command, ask if there's a simpler way
- **Obsess Over Details**: Test edge cases, handle errors, write clear descriptions
- **Simplify Ruthlessly**: Remove any complexity that doesn't add value

### 4. Document Generously
- Commands should explain what they do and why
- Skills should have examples in SKILL.md
- Use inline comments for complex logic

### 5. Version Control Wisely
- **Commit**: Commands, skills, CLAUDE.md, README.md
- **Gitignore**: private/, history.jsonl, settings.json, todos/, projects/

---

## Common Patterns

### Pattern: Command Invokes Skill

**Command** (`commands/collect-commits.md`):
```markdown
---
allowed-tools: Bash(python:*)
description: Extract git commits for portfolio
---

Run the git commit collector:
!`python ~/.claude/skills/git-commit-collector/extract_commits.py $ARGUMENTS`
```

**Skill** (`skills/git-commit-collector/extract_commits.py`):
- Handles parsing, extraction, output
- Saves to `~/.claude/private/commits/`

### Pattern: Multi-Step Workflow

**Command** (`commands/clean-up.md`):
```markdown
---
allowed-tools: Glob, Grep, Read, Edit
description: Update CLAUDE.md based on codebase analysis
---

## Step 1: Scan
- Glob: `**/*.py`
- Grep: Common patterns

## Step 2: Analyze
- Read representative files
- Identify conventions

## Step 3: Update
- Edit CLAUDE.md sections
- Show diff before writing
```

### Pattern: Dynamic Context Injection

**Command** (`commands/commit-m.md`):
```markdown
---
allowed-tools: Bash(git:*)
description: Generate commit message
---

## Context
- Status: !`git status`
- Diff: !`git diff --cached`
- Recent commits: !`git log --oneline -10`

Now generate a message following conventional commit format...
```

---

## FAQ

### Q: Should I create a command or a skill?
**A**: If users invoke it directly → Command. If other commands reuse it → Skill. If both → Create a skill and a thin command wrapper.

### Q: Can I nest skills?
**A**: Yes! Skills can call other skills. Just document dependencies in SKILL.md.

### Q: How do I test commands without cluttering git history?
**A**: Use `private/` for test outputs. Or create a `/test-commands` directory (gitignored).

### Q: What if I need secrets (API keys)?
**A**: Use environment variables. NEVER store secrets in anju-claude. Reference them via `$ENV_VAR` in commands.

---

## Domain Standards

Project-specific technical standards are maintained in `standards/`:

- **`unreal-engine.md`** - Unreal Engine naming conventions, Python scripting patterns, material workflows, and performance best practices

These standards complement the workflow automation in this folder. Commands and skills should follow (and enforce) the conventions defined in these documents.

**When to read standards:**
- Before writing UE-related commands or skills
- When creating asset automation scripts
- When enforcing project conventions via tooling

---

## Integration with Main Project

The main `anju` project has its own `CLAUDE.md` with the **ultrathink** philosophy. This file (`anju-claude/CLAUDE.md`) complements it by defining **how** to build tools that embody that philosophy.

- **Main CLAUDE.md**: Philosophy, project conventions, development mindset
- **This CLAUDE.md**: Command/skill system, workflow automation, data management

When Claude works on the main project, it reads both files:
1. Main CLAUDE.md → *What* to build and *how* to think
2. This CLAUDE.md → *Tools* available and *how* to extend them

---

## Final Thought

> "Technology alone is not enough. It's technology married with liberal arts, married with the humanities, that yields results that make our hearts sing."

Every command, every skill, every line in this folder should make your workflow sing. If it doesn't, iterate until it does.

**Now go make something insanely great.**
