#!/bin/bash
# Download curated matcap presets from nidorx/matcaps
# ~80 diverse matcaps: metals, clay, colorful, earth tones, etc.

BASE="https://raw.githubusercontent.com/nidorx/matcaps/master"
THUMB_DIR="$(dirname "$0")/thumb"
FULL_DIR="$(dirname "$0")/full"

IDS=(
  # Grays / Monochrome (12)
  0F0F0F_4B4B4B_1C1C1C_2C2C2C
  1B1B1B_999999_575757_747474
  2A2A2A_B3B3B3_6D6D6D_848C8C
  313131_BBBBBB_878787_A3A4A4
  3B3B3B_C7C7C7_878787_A4A4A4
  434343_9E9E9E_8C8C8C_848484
  555555_C8C8C8_8B8B8B_A4A4A4
  6D6D6D_3E3E3E_C0C0C0_949494
  878787_4C4C4C_646464_5C5C5C
  B0B0B0_6E6E6E_848484_8C8C8C
  D5D5D5_929292_ACACAC_B4B4B4
  8D8D8D_DDDDDD_CCCCCC_B7B7B7

  # Blue (8)
  0404E8_0404B5_0404CB_3333FC
  1A2461_3D70DB_2C3C8F_2C6CAC
  1D3FCC_051B5F_81A0F2_5579E9
  304FB1_69A1EF_5081DF_5C8CE6
  36C8FA_176ACB_24A7EF_1D93EC
  3E95CC_65D9F1_A2E2F6_679BD4
  487FC9_A8E7F8_88CCF2_70AFDE
  346088_6ABED7_56A0C5_4E91B8

  # Cyan / Teal (4)
  045C5C_0DBDBD_049393_04A4A4
  2EAC9E_61EBE3_4DDDD1_43D1C6
  34A09C_6EE5E3_5CD7D3_4EC9C6
  489B7A_A0E7D9_6DC5AC_87DAC7

  # Green (8)
  04E804_04B504_04CB04_33FC33
  37C337_279F27_186018_248824
  48C381_226640_369F64_3CAC74
  2D8753_5CD6A5_45BB82_4CC494
  293D21_ABC692_73B255_667C5C
  468126_C1DDB5_8AC460_A1D07C
  6EC66E_C9F8C9_A3E8A3_B4F1B4
  54C104_BBFA0F_97EF04_7AE104

  # Yellow / Gold (4)
  D1AC04_F8E50A_EDD004_B38D04
  482908_894E0D_FBDB52_CA7420
  B27744_5A2804_F6C488_EBB27D
  D8C949_F5F19E_6B7855_9A9858

  # Orange / Warm (4)
  DC3E04_B52604_FC7D20_F85F04
  DE9261_86361E_A85A37_944C2C
  48270F_C4723B_9B5728_7B431B
  593E2C_E5D8A9_BC9F79_9F8A68

  # Red (4)
  D54C2B_5F1105_F39382_F08375
  430404_BD9295_7E1E21_94544C
  B62D33_E4868B_7E2D34_DD6469
  8A3B3D_DA5F62_461F20_BC7F81

  # Pink / Magenta (4)
  D8388B_230A14_FCC8FC_FC71E1
  DA5788_DE94BD_E078A3_DD83B4
  D64480_E27497_EA9BB1_CD156F
  89204B_17080D_DA4377_F780B5

  # Purple (4)
  320455_720DBE_560496_47047B
  8955D0_744CC4_EA4AEF_954DA4
  8A3DA1_D77CE4_C263D4_B75AC9
  0C0CC3_04049F_040483_04045C

  # Brown / Earth (6)
  331A0B_B17038_7D4E28_5B351A
  3A2412_A78B5F_705434_836C47
  714C30_EAD7C5_CC9265_E2B48F
  8A5B34_F3BD7C_DA9758_BE7E45
  72625B_F0DFD0_D9BAA5_C3A595
  B66D59_F0C9B2_E5B49C_DAA084

  # Warm neutrals (3)
  302721_CAC1BB_7A706A_91959B
  3A3329_C9B090_928069_A9957A
  584F3A_BEC3BD_C5A57D_A39073

  # Cool neutrals (4)
  161B1F_C7E0EC_90A5B3_7B8C9B
  293534_B2BFC5_738289_8A9AA7
  28292A_D3DAE5_A3ACB8_818183
  385264_A1D3E2_86ADC1_6E94A8

  # Clay / Ceramic (5)
  3B3C3F_DAD9D5_929290_ABACA8
  434240_D3D3CF_898784_A4A49F
  464445_D2D0CB_919196_A8ADB0
  D0CCCB_524D50_928891_727581
  D7DFDB_AAB5AF_F5FAF7_BCC4C4

  # Chrome / Metal (3)
  0A0A0A_A9A9A9_525252_747474
  353535_CFCFCF_828282_A4A4A4
  3E3E3E_AEAEAE_848484_777777

  # Special / Artistic (5)
  050505_747474_4C4C4C_333333
  3E2335_D36A1B_8E4A2E_2842A5
  326666_66CBC9_C0B8AE_52B3B4
  DBDBBB_F7F7E4_AFAF89_C4C49C
  FBB82D_FBEDBF_FBDE7D_FB7E05
)

echo "Downloading ${#IDS[@]} matcaps..."
FAIL=0
OK=0

for id in "${IDS[@]}"; do
  # Download thumbnail
  curl -sL "${BASE}/thumbnail/${id}.jpg" -o "${THUMB_DIR}/${id}.jpg" --max-time 10
  if [ $? -ne 0 ]; then
    echo "FAIL thumb: ${id}"
    ((FAIL++))
    continue
  fi

  # Download full resolution (512px)
  curl -sL "${BASE}/512/${id}.png" -o "${FULL_DIR}/${id}.png" --max-time 30
  if [ $? -ne 0 ]; then
    echo "FAIL full: ${id}"
    ((FAIL++))
    continue
  fi

  ((OK++))
  echo "OK (${OK}/${#IDS[@]}): ${id}"
done

echo ""
echo "Done: ${OK} success, ${FAIL} failed out of ${#IDS[@]} total"
